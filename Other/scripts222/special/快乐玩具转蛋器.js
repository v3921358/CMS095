var status = -1;
var itemList = Array(
 
  Array(5000212, 0, 1, 1),
  Array(5000213, 0, 1, 1),
  Array(5000214, 0, 1, 1),
  Array(5000249, 0, 1, 1),
  Array(5000250, 0, 1, 1),
  Array(2430007, 5, 1, 1),
  Array(5000251, 0, 1, 1),
  Array(5000256, 0, 1, 1),
  Array(5000257, 0, 1, 1),
  Array(5000258, 0, 1, 1),
  Array(5000281, 0, 1, 1),
  Array(5000282, 0, 1, 1),
  Array(5000283, 0, 1, 1),
  Array(5000290, 0, 1, 1),
  Array(5000291, 0, 1, 1),
  Array(5000292, 0, 1, 1),

 


   
  Array(1902402, 10, 1, 1),
  Array(1902403, 10, 1, 1),
  Array(1902404, 10, 1, 1),
  Array(1902405, 10, 1, 1),
  Array(1902406, 10, 1, 1),
  Array(1902407, 10, 1, 1),
  Array(1902408, 10, 1, 1),
  Array(1902409, 10, 1, 1),
  Array(1902410, 10, 1, 1),
  Array(1902414, 10, 1, 1),
  Array(1902416, 10, 1, 1),
  Array(1902417, 10, 1, 1),
  Array(1902420, 10, 1, 1),
  Array(1902423, 10, 1, 1),
  Array(1902424, 10, 1, 1),
  Array(1902425, 10, 1, 1),
  Array(1902426, 10, 1, 1),
  Array(1902427, 10, 1, 1),
  Array(1902428, 10, 1, 1),
  Array(1902442, 10, 1, 1),
  Array(1902443, 10, 1, 1),

  
  
  
    Array(3015661, 90, 1, 1),
	Array(3015664, 90, 1, 1),
	Array(3015689, 90, 1, 1),
	Array(3015693, 90, 1, 1),
	Array(3015717, 90, 1, 1),
	Array(3015754, 90, 1, 1),
	Array(3015755, 90, 1, 1),
	Array(3015756, 90, 1, 1),
	Array(3015757, 90, 1, 1),
	Array(3015788, 90, 1, 1),
	Array(3015790, 90, 1, 1),
	Array(3015795, 90, 1, 1),
	Array(3015796, 90, 1, 1),
	Array(3015857, 90, 1, 1),
	Array(3015858, 90, 1, 1),
	Array(3015790, 90, 1, 1),
	Array(3015795, 90, 1, 1),
	Array(3015796, 90, 1, 1),
	Array(3015857, 90, 1, 1),
	Array(3015858, 90, 1, 1),
	Array(3015859, 90, 1, 1),
	Array(3015860, 90, 1, 1),
	Array(3015861, 90, 1, 1),
	Array(3015867, 90, 1, 1),
	Array(3015873, 90, 1, 1),
	
	Array(3015886, 90, 1, 1),
	Array(3015896, 90, 1, 1),
	Array(3015916, 90, 1, 1),
	
	Array(3015996, 90, 1, 1),
	Array(3016000, 90, 1, 1),
	Array(3016200, 90, 1, 1),
	Array(3016208, 90, 1, 1),
	Array(3018019, 90, 1, 1),
	
	Array(3018021, 90, 1, 1),
	Array(3018024, 90, 1, 1),
	
	Array(3018026, 90, 1, 1),
	Array(3018027, 90, 1, 1),
	Array(3018038, 90, 1, 1),
	Array(3018044, 90, 1, 1),
	Array(3018045, 90, 1, 1),
	
	Array(3018050, 90, 1, 1),
	Array(3018058, 90, 1, 1),
	Array(3018085, 90, 1, 1),
	Array(3018086, 90, 1, 1),
	Array(3018091, 90, 1, 1),
	Array(3018112, 90, 1, 1),
	Array(3018115, 90, 1, 1),
	Array(3018182, 90, 1, 1),
	Array(3018245, 90, 1, 1),
	
	
    Array(1302160, 90, 1, 1),
	Array(1302161, 90, 1, 1),
	Array(1302162, 90, 1, 1),
    Array(1302128, 90, 1, 1),
    Array(1302084, 90, 1, 1),
	Array(1322051, 90, 1, 1),
	Array(1442123, 90, 1, 1),
	Array(1332134, 90, 1, 1),
	Array(1372062, 90, 1, 1),
    Array(1012170, 90, 1, 1), //鬼脸
    Array(1003843, 70, 1, 1), //狐狸面具
    Array(1022212, 90, 1, 1), //眼镜
    Array(1152000, 250, 1, 1), //虎爪
    Array(1152001, 200, 1, 1),
    Array(1152009, 150, 1, 1),
    Array(1102084, 300, 1, 1), //粉色盖亚披风
    Array(1102086, 300, 1, 1), //紫色盖亚披风
    Array(1102041, 300, 1, 1), //浪人披风（粉）
    Array(1102040, 300, 1, 1), //浪人披风（黄）
    Array(1102042, 300, 1, 1), //浪人披风（紫）
    Array(1042231, 300, 1, 1), //运动会上衣
    Array(1062148, 300, 1, 1), //运动会裤子
    Array(1802082, 300, 1, 1), //宠物装备
    Array(1802083, 300, 1, 1),
    Array(1802084, 300, 1, 1),
    Array(1002939, 300, 1, 1), //安全帽

    Array(1012058, 300, 1, 1), //
    Array(1402063, 300, 1, 1), //樱花伞
    Array(1002677, 300, 1, 1), //玩具匠人帽
    Array(2070006, 350, 1, 1), //齿轮
    Array(2070007, 350, 1, 1), //月牙
    Array(2070005, 350, 1, 1), //金钱镖
    Array(2070004, 350, 1, 1), //黑色刺
    Array(2070003, 350, 1, 1), //雪花
    Array(2070019, 90, 1, 1), //高科技电光镖

    Array(1092022, 300, 1, 1), //调色盾牌
    Array(1112422, 350, 1, 1), //炫色戒指
    Array(1112423, 350, 1, 1), //银笔尖戒指
    Array(1112424, 350, 1, 1), //墨羽笔戒指
    Array(1112425, 350, 1, 1), //金怀表戒指
    Array(1112426, 350, 1, 1), //蒲公英戒指
    Array(1422011, 350, 1, 1), //酒瓶
    Array(1002799, 350, 1, 1), //月桂冠
    Array(1002728, 350, 1, 1), //圣诞鹿角
    Array(1432039, 350, 1, 1), //钓鱼竿
    Array(1422036, 350, 1, 1), //玩具匠人
    Array(1302022, 350, 1, 1), //竹刀
    Array(1402013, 350, 1, 1), //白日
    Array(1012011, 350, 1, 1), //鹿鼻子
    Array(1032032, 350, 1, 1), //秋叶耳环	
    Array(1051098, 350, 1, 1), //红浴巾
    Array(1050100, 350, 1, 1), //蓝浴巾
    Array(1032040, 350, 1, 1), //枫叶型耳环
    Array(1002699, 350, 1, 1), //南瓜帽子
    Array(1002238, 400, 1, 1), //工地帽
    Array(1122015, 350, 1, 1), //枫叶围巾
    Array(1332032, 350, 1, 1), //圣诞树
    Array(1432046, 350, 1, 1), //圣诞树手杖
    Array(1002418, 350, 1, 1), //报废报纸头盔
    Array(1002419, 350, 1, 1), //枫叶帽
    Array(1002424, 350, 1, 1), //红马术帽
    Array(1002425, 350, 1, 1), //蓝马术帽
    Array(1012056, 300, 1, 1), //狗狗鼻
    Array(1012132, 200, 1, 1), //鸟鼻
    Array(1022060, 300, 1, 1), //狐猴
    Array(1082252, 350, 1, 1), //枫叶手套
    Array(1012102, 300, 1, 1), //枫叶
    Array(4001465, 350, 5, 1), //爱心宝石
    Array(4001465, 350, 10, 1), //爱心宝石
    Array(4001465, 350, 20, 1), //爱心宝石
    Array(4001465, 350, 50, 1), //爱心宝石
    //Array(1102085,700,1,1),//黄色盖亚披风
    Array(1302063, 350, 1, 1), //然烧的火焰刀
    Array(1082145, 350, 1, 1), //工地手套（各种颜色全部+进去）
    Array(1082146, 350, 1, 1), //工地手套（各种颜色全部+进去）
    Array(1082147, 350, 1, 1), //工地手套（各种颜色全部+进去）
    Array(1082148, 350, 1, 1), //工地手套（各种颜色全部+进去）
    Array(1082149, 350, 1, 1), //工地手套（各种颜色全部+进去）
    Array(1082150, 350, 1, 1), //工地手套（各种颜色全部+进去）
    Array(1002758, 300, 1, 1), //强化版枫叶头盔
    Array(1002511, 350, 1, 1), //枫叶头盔
    Array(1432015, 350, 1, 1), //滑板
    Array(1432016, 350, 1, 1), //
    Array(1432017, 350, 1, 1), //
    Array(1432018, 350, 1, 1), //
    Array(1442016, 350, 1, 1), //
    Array(1442017, 350, 1, 1), //
    Array(1442030, 350, 1, 1), //
    Array(1442046, 350, 1, 1), //
    Array(1442054, 350, 1, 1), //
    Array(1442055, 350, 1, 1), //
    Array(1442056, 350, 1, 1), //
    Array(1442057, 350, 1, 1), //
    Array(1032058, 350, 1, 1), //工作人员C钛质收信机
    Array(1052166, 350, 1, 1), //无敌工作人员套装
    Array(1052165, 350, 1, 1), //降落伞工作人员套装
    Array(1072239, 350, 1, 1), //黄色钉鞋
    Array(1072238, 350, 1, 1), //紫色钉鞋
    Array(1302085, 350, 1, 1), //叉子
    Array(1322006, 350, 1, 1), //钢管
    Array(1322031, 350, 1, 1), //葵花宝典
    Array(1332017, 350, 1, 1), //金蛇剑
    Array(1432004, 350, 1, 1), //长八蛇矛
    Array(1432008, 350, 1, 1), //海神叉
    Array(1442009, 350, 1, 1), //月牙戟
    Array(1442044, 350, 1, 1), //战魂斗杀戟
    Array(1472031, 350, 1, 1), //龙之拳
    Array(1472053, 350, 1, 1), //逆龙咆哮拳
    Array(2049006, 300, 1, 1), //还原卷轴
    Array(2340000, 400, 1, 1), //祝福卷轴
    Array(2340000, 400, 2, 1), //祝福卷轴
    Array(2049100, 400, 1, 1), //混沌卷轴60%
    Array(2049116, 400, 1, 1), //强化混沌卷轴60%
    Array(2049300, 400, 1, 1), //高级装备强化卷轴
    Array(2049301, 400, 1, 1), //装备强化卷轴
    Array(4021012, 200, 1, 1), //强烈灵魂的净水
    Array(4021011, 200, 1, 1), //纯洁灵魂的火花
    Array(2049000, 400, 1, 1), //白E

    //------------------椅子-----------------------

    Array(3010835, 350, 1, 1), //爱情水晶球记忆椅
    Array(3015002, 200, 1, 1), //七彩摩天轮
    Array(3015014, 200, 1, 1), //千钧一发！
    Array(3015111, 200, 1, 1), //青蛙飓风飞椅
    Array(3015075, 200, 1, 1), //铲雪狂人椅子
    Array(3015157, 200, 1, 1), //安德洛墨达椅子
    Array(3015181, 200, 1, 1), //仲夏夜之梦椅子
    Array(3015262, 300, 1, 1), //满月清辉椅子
    Array(3015276, 300, 1, 1), //拳王乌鲁斯椅子
    Array(3015310, 300, 1, 1), //塞维利亚西班牙广场椅子
    Array(3015325, 300, 1, 1), //夜晚满月椅子
    Array(3015326, 300, 1, 1), //叮当叠罗汉椅子
    Array(3015327, 300, 1, 1), //梦之蝴蝶椅子
    Array(3016000, 200, 1, 1), //大象跷跷板椅子
    Array(3015565, 200, 1, 1), //星球椅子
    Array(3015567, 200, 1, 1), //
    Array(3015568, 200, 1, 1), //
    Array(3015570, 200, 1, 1), //
    Array(3015571, 200, 1, 1), //
    Array(3015572, 200, 1, 1), //星球椅子
    Array(3010151, 350, 1, 1), //无人岛椅子
    Array(3010108, 350, 1, 1), //幼龙秋千
    Array(3010073, 200, 1, 1), //baby品克缤
    Array(3010070, 180, 1, 1), //巨无霸品克缤
    Array(3010044, 180, 1, 1), //同一红伞下



    //------------------配方-----------------------

  Array(1912402, 10, 1, 1),
  Array(1912403, 1, 1, 1),
  Array(1912404, 10, 1, 1),
  Array(1912405, 10, 1, 1),
  Array(1912406, 10, 1, 1),
  Array(1912407, 10, 1, 1),
  Array(1912408, 10, 1, 1),
  Array(1912409, 10, 1, 1),
  Array(1912410, 10, 1, 1),
  Array(1912414, 10, 1, 1),
  Array(1912416, 10, 1, 1),
  Array(1912417, 10, 1, 1),
  Array(1912420, 10, 1, 1),
  Array(1912423, 10, 1, 1),
  Array(1912424, 10, 1, 1),
  Array(1912425, 10, 1, 1),
  Array(1912426, 10, 1, 1),
  Array(1912427, 10, 1, 1),
  Array(1912428, 10, 1, 1),
  Array(1912442, 10, 1, 1),
  Array(1912443, 10, 1, 1),
  Array(2511023, 120, 1, 1)


);



function start() {
    action(1, 0, 0);
}

function action(mode, type, selection) {
    if (mode == 1) {
        status++;
    } else {
        if (status == 0) {
           
            cm.dispose();
        }
        status--;
    }
    var jpzs = "";
    for (var j = 0; j < itemList.length; j++) {
        jpzs += "#v" + itemList[j][0] + "#";
    }
    if (status == 0) {
        if (cm.getPlayer().getLevel() < 10) {
            cm.sendOk("您的等级太低，无法使用快乐百宝箱。");
            cm.dispose();
            return;
        }
        if (cm.haveItem(4110000, 1)) {
            cm.sendSimple("冒险岛飞天猪中有各类#b装备、卷轴或稀有新奇的道具#k噢！使用“#b#t4110000##k”就可以抽奖，否则是不可以使用我的。现在要玩转蛋机么? 宠物是展示，好东西都在#r神龙的礼物\r\n#b#L2#试试手气吧#l#k\r\n#b#L4#十连抽#l#k\r\n\r\n\r\n奖励展示:\r\n" + jpzs);
        } else {
            cm.sendSimple("冒险岛飞天猪中有各类#b装备、卷轴或稀有新奇的道具#k噢！使用“#b#t4110000##k”就可以交换。 假如不买转蛋券的话，是不可以使用我的。现在要玩转蛋机么?    \r\n\r\n#r你背包里没#v4110000##z4110000#\r\n\r\n#k奖励展示:\r\n" + jpzs + "");
            cm.dispose();
		}
    } else if (selection == 2) {
        if (cm.getInventory(1).isFull(1)) {
            cm.sendOk("请保证背包#b装备栏#k至少有 #r1 #k个位置");
            cm.dispose();
            return;
        }
        if (cm.getInventory(2).isFull(1)) {
            cm.sendOk("请保证背包#b消耗栏#k至少有 #r1 #k个位置");
            cm.dispose();
            return;
        }
        if (cm.getInventory(3).isFull(1)) {
            cm.sendOk("请保证背包#b设置栏#k至少有 #r1 #k个位置");
            cm.dispose();
            return;
        }
        if (cm.getInventory(4).isFull(1)) {
            cm.sendOk("请保证背包#b其他栏#k至少有 #r1 #k个位置");
            cm.dispose();
            return;
        }
        var chance = cm.getDoubleFloor(cm.getDoubleRandom() * 500);
        var finalitem = Array();
        for (var i = 0; i < itemList.length; i++) {
            if (itemList[i][1] >= chance) {
                finalitem.push(itemList[i]);
            }
        }
        if (finalitem.length != 0) {
            var item;

            var finalchance = cm.randInt(finalitem.length);
            var itemId = finalitem[finalchance][0];
            var quantity = finalitem[finalchance][2];
            var notice = finalitem[finalchance][3];
            if (item != -1) {
                if (itemId == 1022212) {
                    cm.gainItem(4110000, -1);
                    cm.gainItemB(1022212, 1, 0, 0, 0, "", 20, 20, 20, 20, 20, 20, 0);
                    cm.worldMessage(5, "[#z" + itemId + "#]被 " + cm.getPlayer().getName() + "抽到，大家一起恭喜我吧！！！")
                    cm.setBossRankCount("转蛋屋积分", 1);
                    cm.sendOk("你获得了 #b#t" + item + "##k " + quantity + "个。");
                    cm.dispose();
                }
                item = cm.gainGachaponItem(itemId, quantity, "快乐百宝箱", notice);
                cm.gainItem(4110000, -1);
                cm.setBossRankCount("转蛋屋积分", 1);
                cm.sendOk("你获得了 #b#t" + item + "##k " + quantity + "个。");
                cm.dispose();
                //给1个纪念币
                // cm.给物品(2000005,1);
            } else {
                cm.sendOk("你确实有#b#t4110000##k吗？如果是，请你确认在背包的装备，消耗，其他窗口中是否有一格以上的空间。");
            }
            cm.safeDispose();
        } else {
            cm.sendOk("今天的运气可真差，什么都没有拿到。\r\n(获得了安慰奖：#v2000005#。)");
            cm.gainItem(4110000, -1);
            // cm.gainItem(2000005, 1);
            //给1点积分
            cm.setBossRankCount("转蛋屋积分", 1);
            //cm.setBossRankCount("快乐百宝箱转蛋屋积分",1);
            cm.safeDispose();
        }
    } else if (selection == 4) {
        var itemids = [];
        if (!cm.haveItem(4110000, 10)) {
            cm.sendOk("你的 #b#t4110000# #k不够 #r10 #k张，无法抽奖。");
            cm.dispose();
            return;
        }
        if (cm.getInventory(1).isFull(9)) {
            cm.sendOk("请保证背包#b装备栏#k至少有 #r10 #k个位置");
            cm.dispose();
            return;
        }
        if (cm.getInventory(2).isFull(9)) {
            cm.sendOk("请保证背包#b消耗栏#k至少有 #r10 #k个位置");
            cm.dispose();
            return;
        }
        if (cm.getInventory(3).isFull(9)) {
            cm.sendOk("请保证背包#b设置栏#k至少有 #r10 #k个位置");
            cm.dispose();
            return;
        }
        if (cm.getInventory(4).isFull(9)) {
            cm.sendOk("请保证背包#b其他栏#k至少有 #r10 #k个位置");
            cm.dispose();
            return;
        }
        for (var j = 0; j < 10; j++) {
            var chance = cm.getDoubleFloor(cm.getDoubleRandom() * 500);
            var finalitem = Array();
            for (var i = 0; i < itemList.length; i++) {
                if (itemList[i][1] >= chance) {
                    finalitem.push(itemList[i]);
                }
            }
            if (finalitem.length != 0) {
                var item;

                var finalchance = cm.randInt(finalitem.length);
                var itemId = finalitem[finalchance][0];
                var quantity = finalitem[finalchance][2];
                var notice = finalitem[finalchance][3];
                if (item != -1) {
                    cm.gainItem(4110000, -1);
                    if (itemId == 1022212) {
                        cm.gainItemB(1022212, 1, 0, 0, 0, "", 20, 20, 20, 20, 20, 20, 0);
                        itemids.push(itemId);
                        cm.worldMessage(5, "[#z" + itemId + "#]被 " + cm.getPlayer().getName() + "抽到，大家一起恭喜我吧！！！")
                        cm.setBossRankCount("转蛋屋积分", 1);
                    } else {
                        item = cm.gainGachaponItem(itemId, quantity, "快乐百宝箱", notice);
                        cm.setBossRankCount("转蛋屋积分", 1);
                        itemids.push(itemId);
                    }
                    //给1个纪念币
                    //cm.gainItem(4000000,1);
                } else {
                    cm.sendOk("你确实有#b#t4110000##k吗？如果是，请你确认在背包的装备，消耗，其他窗口中是否有一格以上的空间。");
                }
                cm.safeDispose();
            } else {
                cm.sendOk("今天的运气可真差，什么都没有拿到。\r\n(获得了安慰奖：#v2000005#。)");
                cm.setBossRankCount("转蛋屋积分", 1);
                cm.gainItem(4110000, -1);
                cm.gainItem(4000000, 1);
                cm.safeDispose();
            }
        }
        var idtext = "以下是你抽到的物品:\r\n";
        for (var c = 0; c < itemids.length; c++) {
            idtext += "#v" + itemids[c] + "##z" + itemids[c] + "#\r\n";
        }
        cm.sendSimple(idtext);
        cm.safeDispose;
    }
}